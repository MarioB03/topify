(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{804:(e,t,a)=>{Promise.resolve().then(a.bind(a,2318))},2318:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var s=a(5155),l=a(2115),o=a(3915),r=a(5317);let i={apiKey:"AIzaSyDxLWGvYbH-8PpL3F9bOkqZHJDt_8YcNx0",authDomain:"topify-5e609.firebaseapp.com",projectId:"topify-5e609",storageBucket:"topify-5e609.firebasestorage.app",messagingSenderId:"1025756851346",appId:"1:1025756851346:web:f4c5e0a7c4e8c9b2a5d6f7"},c=()=>{let[e,t]=(0,l.useState)(null),[a,s]=(0,l.useState)(null),[c,n]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(async()=>{try{let e=(0,o.Wp)(i),a=(0,r.aU)(e);t(a),s({collection:r.rJ,addDoc:r.gS,getDocs:r.GG,updateDoc:r.mZ,doc:r.H9,deleteDoc:r.kd,query:r.P,orderBy:r.My,where:r._M}),n(!0)}catch(e){console.error("Error initializing Firebase:",e)}})()},[]),{firestore:e,firestoreUtils:a,isReady:c}},n=()=>{let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[o,r]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=()=>{let e=window.innerWidth;t(e<768),s(e>=768&&e<1024),r(e>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{isMobile:e,isTablet:a,isDesktop:o,getSongsPerPage:()=>e?11:a?12:13}},d=[{id:"bohemianrhapsody",title:"Bohemian Rhapsody",artist:{name:"Queen"},album:{cover_medium:"https://via.placeholder.com/250x250/8b5cf6/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/8b5cf6/ffffff?text=\uD83C\uDFB5"},duration:355,votes:45,firebaseId:"mock1"},{id:"imaginejohnlennon",title:"Imagine",artist:{name:"John Lennon"},album:{cover_medium:"https://via.placeholder.com/250x250/10b981/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/10b981/ffffff?text=\uD83C\uDFB5"},duration:183,votes:38,firebaseId:"mock2"},{id:"hotelcalifornia",title:"Hotel California",artist:{name:"Eagles"},album:{cover_medium:"https://via.placeholder.com/250x250/f59e0b/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/f59e0b/ffffff?text=\uD83C\uDFB5"},duration:391,votes:32,firebaseId:"mock3"},{id:"stairwaytoheaven",title:"Stairway to Heaven",artist:{name:"Led Zeppelin"},album:{cover_medium:"https://via.placeholder.com/250x250/ef4444/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/ef4444/ffffff?text=\uD83C\uDFB5"},duration:482,votes:28,firebaseId:"mock4"},{id:"shapeof you",title:"Shape of You",artist:{name:"Ed Sheeran"},album:{cover_medium:"https://via.placeholder.com/250x250/06b6d4/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/06b6d4/ffffff?text=\uD83C\uDFB5"},duration:233,votes:25,firebaseId:"mock5"},{id:"blinkingfights",title:"Blinding Lights",artist:{name:"The Weeknd"},album:{cover_medium:"https://via.placeholder.com/250x250/8b5cf6/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/8b5cf6/ffffff?text=\uD83C\uDFB5"},duration:200,votes:22,firebaseId:"mock6"},{id:"danceMonkey",title:"Dance Monkey",artist:{name:"Tones and I"},album:{cover_medium:"https://via.placeholder.com/250x250/f97316/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/f97316/ffffff?text=\uD83C\uDFB5"},duration:209,votes:20,firebaseId:"mock7"},{id:"watermelonsugar",title:"Watermelon Sugar",artist:{name:"Harry Styles"},album:{cover_medium:"https://via.placeholder.com/250x250/10b981/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/10b981/ffffff?text=\uD83C\uDFB5"},duration:174,votes:18,firebaseId:"mock8"},{id:"levelingup",title:"Levitating",artist:{name:"Dua Lipa"},album:{cover_medium:"https://via.placeholder.com/250x250/ec4899/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/ec4899/ffffff?text=\uD83C\uDFB5"},duration:203,votes:15,firebaseId:"mock9"},{id:"goodAsHell",title:"Good as Hell",artist:{name:"Lizzo"},album:{cover_medium:"https://via.placeholder.com/250x250/f59e0b/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/f59e0b/ffffff?text=\uD83C\uDFB5"},duration:219,votes:12,firebaseId:"mock10"}],m="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,x={playlist:m?d:[],votedSongs:m?["bohemianrhapsody","imaginejohnlennon","hotelcalifornia"]:[],searchResults:[],currentPage:0,myVotesPage:0,isSearching:!1,currentAudio:null,currentPlayingId:null,userFingerprint:(()=>{let e=localStorage.getItem("topify-user-id");if(!e){let t=document.createElement("canvas"),a=t.getContext("2d");a&&(a.textBaseline="top",a.font="14px Arial",a.fillText("Topify fingerprint",2,2));let s=[navigator.userAgent,navigator.language,window.screen.width+"x"+window.screen.height,new Date().getTimezoneOffset(),t.toDataURL()].join("|"),l=0;for(let e=0;e<s.length;e++)l=(l<<5)-l+s.charCodeAt(e),l&=l;e="user_"+Math.abs(l)+"_"+Date.now(),localStorage.setItem("topify-user-id",e)}return e})(),stats:{totalSongs:m?d.length:0,totalVotes:m?d.reduce((e,t)=>e+t.votes,0):0}},f={SET_PLAYLIST:"SET_PLAYLIST",SET_VOTED_SONGS:"SET_VOTED_SONGS",SET_SEARCH_RESULTS:"SET_SEARCH_RESULTS",SET_CURRENT_PAGE:"SET_CURRENT_PAGE",SET_MY_VOTES_PAGE:"SET_MY_VOTES_PAGE",SET_IS_SEARCHING:"SET_IS_SEARCHING",SET_CURRENT_AUDIO:"SET_CURRENT_AUDIO",ADD_SONG_TO_PLAYLIST:"ADD_SONG_TO_PLAYLIST",UPDATE_SONG_VOTES:"UPDATE_SONG_VOTES",REMOVE_SONG_FROM_PLAYLIST:"REMOVE_SONG_FROM_PLAYLIST",ADD_VOTED_SONG:"ADD_VOTED_SONG",REMOVE_VOTED_SONG:"REMOVE_VOTED_SONG",UPDATE_STATS:"UPDATE_STATS"},u=(e,t)=>{switch(t.type){case f.SET_PLAYLIST:return{...e,playlist:t.payload};case f.SET_VOTED_SONGS:return{...e,votedSongs:t.payload};case f.SET_SEARCH_RESULTS:return{...e,searchResults:t.payload};case f.SET_CURRENT_PAGE:return{...e,currentPage:t.payload};case f.SET_MY_VOTES_PAGE:return{...e,myVotesPage:t.payload};case f.SET_IS_SEARCHING:return{...e,isSearching:t.payload};case f.SET_CURRENT_AUDIO:return{...e,currentAudio:t.payload.audio,currentPlayingId:t.payload.id};case f.ADD_SONG_TO_PLAYLIST:return{...e,playlist:[...e.playlist,t.payload]};case f.UPDATE_SONG_VOTES:return{...e,playlist:e.playlist.map(e=>e.id===t.payload.id?{...e,votes:t.payload.votes}:e)};case f.REMOVE_SONG_FROM_PLAYLIST:return{...e,playlist:e.playlist.filter(e=>e.id!==t.payload)};case f.ADD_VOTED_SONG:return{...e,votedSongs:[...e.votedSongs,t.payload]};case f.REMOVE_VOTED_SONG:return{...e,votedSongs:e.votedSongs.filter(e=>e!==t.payload)};case f.UPDATE_STATS:return{...e,stats:{totalSongs:e.playlist.length,totalVotes:e.playlist.reduce((e,t)=>e+t.votes,0)}};default:return e}},p=(0,l.createContext)(null),h=e=>{let{children:t}=e,[a,o]=(0,l.useReducer)(u,x),{firestore:r,firestoreUtils:i,isReady:d}=c(),{getSongsPerPage:h}=n(),v=(0,l.useCallback)(async()=>{if(m)return void console.log("\uD83D\uDE80 Localhost detected - using mock data");if(d&&r&&i)try{let{collection:e,getDocs:t,query:a,orderBy:s}=i,l=a(e(r,"playlist"),s("votes","desc")),c=await t(l),n=[];c.forEach(e=>{let t=e.data();n.push({firebaseId:e.id,...t})}),o({type:f.SET_PLAYLIST,payload:n})}catch(e){console.error("Error loading playlist from Firebase:",e)}},[r,i,d]),g=(0,l.useCallback)(async()=>{if(m)return void console.log("\uD83D\uDE80 Localhost detected - using mock voted songs");if(d&&r&&i)try{let{collection:e,getDocs:t,query:s,where:l}=i,c=s(e(r,"votedSongs"),l("userId","==",a.userFingerprint)),n=await t(c),d=[];n.forEach(e=>{d.push(e.data().songId)}),o({type:f.SET_VOTED_SONGS,payload:d})}catch(e){console.error("Error loading voted songs from Firebase:",e)}},[r,i,a.userFingerprint,d]);return(0,l.useEffect)(()=>{!m&&d&&a.userFingerprint&&(g(),v())},[d,a.userFingerprint,g,v]),(0,l.useEffect)(()=>{o({type:f.UPDATE_STATS})},[a.playlist]),(0,s.jsx)(p.Provider,{value:{state:a,dispatch:o,actionTypes:f,firestore:r,firestoreUtils:i,isReady:d,getSongsPerPage:h,loadPlaylistFromFirebase:v,loadVotedSongsFromFirebase:g},children:t})},v=()=>{let e=(0,l.useContext)(p);if(!e)throw Error("useTopify must be used within a TopifyProvider");return e};var g=a(6766);let y=e=>{var t,a,o;let{song:r,isSearchResult:i=!1,showPosition:c=!1,position:n=0}=e,{state:d,dispatch:m,actionTypes:x,firestore:f,firestoreUtils:u,isReady:p}=v(),[h,y]=(0,l.useState)(!1),[b,S]=(0,l.useState)(!1),_="".concat("string"==typeof r.artist?r.artist:(null==(t=r.artist)?void 0:t.name)||r.artist,"-").concat(r.title).replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),N=d.votedSongs.includes(_),E=e=>1===e?"\uD83E\uDD47":2===e?"\uD83E\uDD48":3===e?"\uD83E\uDD49":"#".concat(e),j=async()=>{if(p&&!N&&!h){y(!0);try{let a,{collection:s,getDocs:l,query:o,where:i,addDoc:c,updateDoc:n,doc:p}=u,h=o(s(f,"playlist"),i("id","==",_)),v=await l(h);if(v.empty){var e,t;a={id:_,title:r.title,artist:"string"==typeof r.artist?r.artist:null==(e=r.artist)?void 0:e.name,cover:(null==(t=r.album)?void 0:t.cover_medium)||r.cover,duration:r.duration,votes:1,createdAt:new Date};let l=await c(s(f,"playlist"),a);a.firebaseId=l.id,m({type:x.ADD_SONG_TO_PLAYLIST,payload:a})}else{let e=v.docs[0],t=e.data();a={firebaseId:e.id,...t},a.votes++,await n(p(f,"playlist",a.firebaseId),{votes:a.votes,updatedAt:new Date}),m({type:x.UPDATE_SONG_VOTES,payload:{id:_,votes:a.votes}})}await c(s(f,"votedSongs"),{songId:_,userId:d.userFingerprint,timestamp:new Date}),m({type:x.ADD_VOTED_SONG,payload:_}),D(1===a.votes?"\uD83C\uDFB5 ".concat(r.title," a\xf1adida a la playlist!"):"\uD83D\uDC4D +1 voto para ".concat(r.title,"!"))}catch(e){console.error("Error voting for song:",e)}finally{y(!1)}}},w=async()=>{if(p&&N&&!b){S(!0);try{let{collection:e,getDocs:t,query:a,where:s,deleteDoc:l,doc:o,updateDoc:i}=u,c=a(e(f,"votedSongs"),s("songId","==",_),s("userId","==",d.userFingerprint));(await t(c)).forEach(async e=>{await l(o(f,"votedSongs",e.id))});let n=d.playlist.find(e=>e.id===_);if(n){let e=Math.max(0,n.votes-1);0===e?(await l(o(f,"playlist",n.firebaseId)),m({type:x.REMOVE_SONG_FROM_PLAYLIST,payload:_})):(await i(o(f,"playlist",n.firebaseId),{votes:e,updatedAt:new Date}),m({type:x.UPDATE_SONG_VOTES,payload:{id:_,votes:e}}))}m({type:x.REMOVE_VOTED_SONG,payload:_}),D("↩️ Voto retirado de ".concat(r.title))}catch(e){console.error("Error removing vote:",e)}finally{S(!1)}}},T=e=>{if(d.currentAudio&&!d.currentAudio.paused&&(d.currentAudio.pause(),d.currentPlayingId===r.id))return void m({type:x.SET_CURRENT_AUDIO,payload:{audio:null,id:null}});let t=new Audio(e);t.play().catch(e=>console.error("Error playing audio:",e)),t.addEventListener("ended",()=>{m({type:x.SET_CURRENT_AUDIO,payload:{audio:null,id:null}})}),m({type:x.SET_CURRENT_AUDIO,payload:{audio:t,id:r.id}})},D=e=>{let t=new CustomEvent("showToast",{detail:{message:e,type:"success"}});window.dispatchEvent(t)},A="string"==typeof r.artist?r.artist:null==(a=r.artist)?void 0:a.name;return(0,s.jsxs)("div",{className:"".concat(i?"song-card":"playlist-item"," rounded-lg p-1.5 flex items-center gap-2 min-h-[56px] ").concat(N&&i?"opacity-60":""),children:[c&&(0,s.jsx)("div",{className:"text-lg font-bold min-w-8 text-center text-gradient flex items-center justify-center",children:"string"==typeof E(n)&&E(n).includes("\uD83E\uDD47\uD83E\uDD48\uD83E\uDD49")?(0,s.jsx)("span",{className:"text-xl mr-1",children:E(n)}):E(n)}),(0,s.jsx)(g.default,{src:(null==(o=r.album)?void 0:o.cover_medium)||r.cover||"/placeholder.svg",alt:r.title,width:40,height:40,className:"rounded-md object-cover shadow-lg flex-shrink-0 w-[40px] h-[40px]"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"font-semibold text-sm truncate text-gray-800",children:r.title}),(0,s.jsx)("div",{className:"truncate font-medium text-xs text-gray-700",children:A}),N&&i&&(0,s.jsx)("div",{className:"text-xs text-orange-400",children:"✓ Ya votada"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!i&&(0,s.jsx)("div",{className:"btn-secondary text-white px-3 py-1 rounded-lg font-bold shadow-lg",children:r.votes}),r.preview&&i&&(0,s.jsx)("button",{className:"btn-audio text-white p-2 rounded-full shadow-lg",onClick:()=>T(r.preview),title:"Escuchar preview",children:(0,s.jsx)("span",{className:"text-sm",children:d.currentPlayingId===r.id?"⏸️":"\uD83C\uDFB5"})}),i?(0,s.jsx)("button",{className:"btn-secondary text-white px-4 py-2 rounded-lg font-medium shadow-lg transition-all ".concat(N||h?"opacity-50 cursor-not-allowed":"hover:scale-105"),onClick:j,disabled:N||h,children:h?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{children:"Votando..."})]}):N?"Votada":"Votar"}):(0,s.jsxs)(s.Fragment,{children:[!N&&(0,s.jsx)("button",{className:"btn-success text-white px-3 py-1 rounded-lg shadow-lg font-bold w-12 transition-all ".concat(h?"opacity-50 cursor-not-allowed":"hover:scale-105"),onClick:j,disabled:h,title:"Votar por esta canci\xf3n",children:h?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto"}):(0,s.jsx)("span",{className:"text-sm",children:"+1"})}),N&&(0,s.jsx)("button",{className:"btn-danger text-white px-3 py-1 rounded-lg shadow-lg font-medium w-12 transition-all ".concat(b?"opacity-50 cursor-not-allowed":"hover:scale-105"),onClick:w,disabled:b,title:"Quitar mi voto",children:b?(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto"}):(0,s.jsx)("span",{className:"text-sm",children:"-1"})})]})]})]})},b=e=>{let{count:t=3,type:a="song"}=e;return"stat"===a?(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"bg-gray-300 h-16 rounded-2xl"})}):(0,s.jsx)("div",{className:"space-y-2",children:Array.from({length:t}).map((e,t)=>(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsxs)("div",{className:"song-card rounded-lg p-2 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded"}),(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-md"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-1"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),(0,s.jsx)("div",{className:"w-16 h-8 bg-gray-300 rounded-lg"})]})},t))})},S=()=>{let{state:e,dispatch:t,actionTypes:a}=v(),{isMobile:o}=n(),[r,i]=(0,l.useState)(""),[c,d]=(0,l.useState)(null),m=(0,l.useCallback)(async e=>{if(e.length<2)return void t({type:a.SET_SEARCH_RESULTS,payload:[]});if(t({type:a.SET_IS_SEARCHING,payload:!0}),"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname){console.log("\uD83D\uDD0D Localhost detected - using mock search results"),setTimeout(()=>{let s=[{id:"mock".concat(e,"1"),title:"".concat(e," Song 1"),artist:{name:"Mock Artist 1"},album:{cover_medium:"https://via.placeholder.com/250x250/8b5cf6/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/8b5cf6/ffffff?text=\uD83C\uDFB5"},duration:180,preview:null,votes:0},{id:"mock".concat(e,"2"),title:"".concat(e," Song 2"),artist:{name:"Mock Artist 2"},album:{cover_medium:"https://via.placeholder.com/250x250/10b981/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/10b981/ffffff?text=\uD83C\uDFB5"},duration:200,preview:null,votes:0},{id:"mock".concat(e,"3"),title:"".concat(e," Song 3"),artist:{name:"Mock Artist 3"},album:{cover_medium:"https://via.placeholder.com/250x250/f59e0b/ffffff?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60/f59e0b/ffffff?text=\uD83C\uDFB5"},duration:220,preview:null,votes:0}];t({type:a.SET_SEARCH_RESULTS,payload:s}),t({type:a.SET_IS_SEARCHING,payload:!1})},500);return}try{let s=await fetch("https://ws.audioscrobbler.com/2.0/?method=track.search&track=".concat(encodeURIComponent(e),"&api_key=b25b959554ed76058ac220b7b2e0a026&format=json&limit=5"));if(s.ok){let e=await s.json();if(e.results&&e.results.trackmatches&&e.results.trackmatches.track){let s=e.results.trackmatches.track,l=await Promise.all(s.map(async e=>{let t={id:"".concat(e.artist,"-").concat(e.name).replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),title:e.name,artist:{name:e.artist},album:{cover_medium:"https://via.placeholder.com/250x250?text=\uD83C\uDFB5",cover_small:"https://via.placeholder.com/60x60?text=\uD83C\uDFB5"},duration:180,preview:null,votes:0};try{let a=await fetch("https://itunes.apple.com/search?term=".concat(encodeURIComponent(e.artist+" "+e.name),"&media=music&entity=song&limit=1"));if(a.ok){let e=await a.json();if(e.results&&e.results.length>0){let a=e.results[0];t.album.cover_medium=a.artworkUrl100||t.album.cover_medium,t.album.cover_small=a.artworkUrl60||t.album.cover_small,t.preview=a.previewUrl}}}catch(a){e.image&&e.image[2]&&e.image[2]["#text"]&&(t.album.cover_medium=e.image[2]["#text"]),e.image&&e.image[1]&&e.image[1]["#text"]&&(t.album.cover_small=e.image[1]["#text"])}return t}));t({type:a.SET_SEARCH_RESULTS,payload:l})}else t({type:a.SET_SEARCH_RESULTS,payload:[]})}}catch(e){console.error("Error searching songs:",e)}finally{t({type:a.SET_IS_SEARCHING,payload:!1})}},[t,a]);return(0,s.jsxs)("section",{className:"glass-card rounded-3xl ".concat(o?"p-4":"p-6"," flex flex-col flex-1"),children:[(0,s.jsx)("h2",{className:"section-title ".concat(o?"text-xl":"text-2xl"," font-bold ").concat(o?"mb-4":"mb-6"),children:"\uD83D\uDD0D Buscar m\xfasica"}),(0,s.jsx)("div",{className:"".concat(o?"mb-4":"mb-6"),children:(0,s.jsx)("input",{type:"text",value:r,onChange:e=>{let t=e.target.value;i(t),c&&clearTimeout(c),d(setTimeout(()=>{m(t)},300))},placeholder:"Busca canciones por t\xedtulo o artista...",className:"search-input w-full ".concat(o?"px-4 py-3 text-base":"px-6 py-4 text-lg"," rounded-2xl font-medium"),autoComplete:"off"})}),(0,s.jsx)("div",{className:"space-y-2 overflow-y-auto flex-1",children:e.isSearching?(0,s.jsx)(b,{count:3,type:"song"}):0===e.searchResults.length&&r.length>=2?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-6xl mb-6 animate-bounce",children:"\uD83D\uDD0D"}),(0,s.jsx)("p",{className:"text-xl font-semibold mb-2 text-gradient",children:"No se encontraron canciones"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Intenta con otros t\xe9rminos de b\xfasqueda"})]}):0===r.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-6xl mb-6 animate-float",children:"\uD83C\uDFB5"}),(0,s.jsx)("p",{className:"text-xl font-semibold mb-2 text-gradient",children:"Busca tu m\xfasica favorita"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Escribe el nombre de una canci\xf3n o artista"})]}):e.searchResults.map(e=>(0,s.jsx)(y,{song:e,isSearchResult:!0},e.id))})]})},_=()=>{let{state:e}=v(),{isMobile:t}=n(),[a,o]=(0,l.useState)("Calculando...");return(0,l.useEffect)(()=>{let e=new Date("2025-08-23T23:59:59").getTime(),t=()=>{let t=e-new Date().getTime();if(t<0)return void o("\xa1Votaciones cerradas!");let a=Math.floor(t/864e5),s=Math.floor(t%864e5/36e5),l=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3);o("".concat(a,"d ").concat(s,"h ").concat(l,"m ").concat(r,"s"))};t();let a=setInterval(t,1e3);return()=>clearInterval(a)},[]),(0,s.jsxs)("section",{className:"glass-card rounded-3xl ".concat(t?"p-4":"p-6"," flex-shrink-0"),children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"stat-card text-white p-4 rounded-2xl text-center relative overflow-hidden",style:{"--from-color":"#f5d66c","--to-color":"#d39921"},children:[(0,s.jsx)("div",{className:"".concat(t?"text-2xl":"text-3xl"," font-bold mb-1"),children:e.stats.totalSongs}),(0,s.jsx)("div",{className:"text-xs font-medium text-yellow-100",children:"Canciones"})]}),(0,s.jsxs)("div",{className:"stat-card text-white p-4 rounded-2xl text-center relative overflow-hidden",style:{"--from-color":"#8fa183","--to-color":"#768968"},children:[(0,s.jsx)("div",{className:"".concat(t?"text-2xl":"text-3xl"," font-bold mb-1"),children:e.stats.totalVotes}),(0,s.jsx)("div",{className:"text-xs font-medium text-green-100",children:"Votos totales"})]})]}),(0,s.jsxs)("div",{className:"stat-card text-white p-4 rounded-2xl text-center relative overflow-hidden",style:{"--from-color":"#ffdab9","--to-color":"#e2965b"},children:[(0,s.jsx)("div",{className:"text-sm font-medium opacity-90 mb-2",children:"⏰ Votaciones cierran en:"}),(0,s.jsx)("div",{className:"".concat(t?"text-lg":"text-xl"," font-bold"),children:a}),(0,s.jsx)("div",{className:"text-xs opacity-75 mt-1",children:"23 de Agosto, 2025"})]})]})},N=e=>{let{currentPage:t,totalPages:a,onNext:l,onPrevious:o}=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("button",{onClick:o,className:"btn-secondary px-3 py-1 rounded-md text-white text-sm font-medium ".concat(0===t?"opacity-50 cursor-not-allowed":""),disabled:0===t,children:"← Anterior"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600",children:["P\xe1gina ",t+1," de ",a]}),(0,s.jsx)("button",{onClick:l,className:"btn-secondary px-3 py-1 rounded-md text-white text-sm font-medium ".concat(t===a-1?"opacity-50 cursor-not-allowed":""),disabled:t===a-1,children:"Siguiente →"})]})},E=()=>{let{state:e,dispatch:t,actionTypes:a,getSongsPerPage:l}=v(),{isMobile:o}=n(),r=l(),i=[...e.playlist].sort((e,t)=>t.votes-e.votes),c=e.currentPage*r,d=i.slice(c,c+r),m=Math.ceil(i.length/r);return 0===e.playlist.length?(0,s.jsxs)("section",{className:"glass-card rounded-3xl ".concat(o?"p-4":"p-6"," flex flex-col h-full"),children:[(0,s.jsx)("h2",{className:"section-title ".concat(o?"text-xl":"text-2xl"," font-bold ").concat(o?"mb-4":"mb-6"),children:"\uD83D\uDDF3️ Lista de votaciones"}),(0,s.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center",children:(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-6xl mb-6 animate-float",children:"\uD83C\uDFB5"}),(0,s.jsx)("p",{className:"text-xl font-semibold mb-4 text-gradient",children:"\xa1La playlist est\xe1 esperando m\xfasica!"}),(0,s.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"S\xe9 el primero en votar y crea la banda sonora perfecta"}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDC46"}),(0,s.jsx)("span",{children:"Busca canciones arriba"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDDF3️"}),(0,s.jsx)("span",{children:"Vota por tus favoritas"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83C\uDF89"}),(0,s.jsx)("span",{children:"\xa1Aparecer\xe1n aqu\xed!"})]})]})]})})]}):(0,s.jsxs)("section",{className:"glass-card rounded-3xl ".concat(o?"p-4":"p-6"," flex flex-col h-full"),children:[(0,s.jsx)("h2",{className:"section-title ".concat(o?"text-xl":"text-2xl"," font-bold ").concat(o?"mb-4":"mb-6"),children:"\uD83D\uDDF3️ Lista de votaciones"}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"space-y-1 flex-1 overflow-y-auto",children:d.map((e,t)=>(0,s.jsx)(y,{song:e,showPosition:!0,position:c+t+1},e.id))}),m>1&&(0,s.jsx)(N,{currentPage:e.currentPage,totalPages:m,onNext:()=>{e.currentPage<m-1&&t({type:a.SET_CURRENT_PAGE,payload:e.currentPage+1})},onPrevious:()=>{e.currentPage>0&&t({type:a.SET_CURRENT_PAGE,payload:e.currentPage-1})}})]})]})},j=()=>{let{state:e,dispatch:t,actionTypes:a,getSongsPerPage:l}=v(),{isMobile:o}=n(),r=l(),i=e.playlist.filter(t=>e.votedSongs.includes(t.id)).sort((e,t)=>t.votes-e.votes),c=e.myVotesPage*r,d=i.slice(c,c+r),m=Math.ceil(i.length/r),x=t=>[...e.playlist].sort((e,t)=>t.votes-e.votes).findIndex(e=>e.id===t)+1;return 0===e.votedSongs.length?(0,s.jsxs)("section",{className:"glass-card rounded-3xl ".concat(o?"p-4":"p-6"," flex flex-col h-full"),children:[(0,s.jsx)("h2",{className:"section-title ".concat(o?"text-xl":"text-2xl"," font-bold ").concat(o?"mb-4":"mb-6"),children:"❤️ Mis votos"}),(0,s.jsx)("div",{className:"flex-1 flex flex-col justify-center items-center",children:(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-6xl mb-6 animate-float",children:"\uD83D\uDCAD"}),(0,s.jsx)("p",{className:"text-xl font-semibold mb-2 text-gradient",children:"No has votado a\xfan"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Busca y vota por tus canciones favoritas"})]})}),(0,s.jsx)("div",{className:"text-center text-sm text-gray-600",children:"0 votos"})]}):(0,s.jsxs)("section",{className:"glass-card rounded-3xl ".concat(o?"p-4":"p-6"," flex flex-col h-full"),children:[(0,s.jsx)("h2",{className:"section-title ".concat(o?"text-xl":"text-2xl"," font-bold ").concat(o?"mb-4":"mb-6"),children:"❤️ Mis votos"}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"space-y-1 flex-1 overflow-y-auto",children:d.map(e=>(0,s.jsx)(y,{song:e,showPosition:!0,position:x(e.id)},e.id))}),(0,s.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-600 flex-shrink-0",children:[m>1&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(N,{currentPage:e.myVotesPage,totalPages:m,onNext:()=>{e.myVotesPage<m-1&&t({type:a.SET_MY_VOTES_PAGE,payload:e.myVotesPage+1})},onPrevious:()=>{e.myVotesPage>0&&t({type:a.SET_MY_VOTES_PAGE,payload:e.myVotesPage-1})}})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[e.votedSongs.length," voto",1!==e.votedSongs.length?"s":""]})})]})]})]})},w=e=>{let{message:t,type:a="success",duration:o=3e3,onClose:r}=e,[i,c]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{if(t){c(!0);let e=setTimeout(()=>{c(!1),setTimeout(r,300)},o);return()=>clearTimeout(e)}},[t,o,r]),t)?(0,s.jsx)("div",{className:"fixed top-4 right-4 px-6 py-4 rounded-xl transform transition-all duration-300 z-50 ".concat(i?"translate-x-0 opacity-100":"translate-x-full opacity-0"),style:{...(e=>{switch(e){case"success":default:return{background:"linear-gradient(135deg, #10b981, #059669)",border:"1px solid rgba(16, 185, 129, 0.3)",color:"white"};case"error":return{background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"1px solid rgba(239, 68, 68, 0.3)",color:"white"};case"info":return{background:"linear-gradient(135deg, #3b82f6, #2563eb)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"white"}}})(a),boxShadow:"0 10px 25px rgba(0, 0, 0, 0.3), 0 4px 12px rgba(0, 0, 0, 0.15)",fontWeight:"600"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"success"===a?"\uD83C\uDF89":"error"===a?"⚠️":"ℹ️"}),(0,s.jsx)("span",{children:t})]})}):null},T=()=>{let{isMobile:e,isTablet:t,isDesktop:a}=n(),[o,r]=(0,l.useState)({message:"",type:"success"});return l.useEffect(()=>{let e=e=>{r({message:e.detail.message,type:e.detail.type||"success"})};return window.addEventListener("showToast",e),()=>window.removeEventListener("showToast",e)},[]),(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(w,{message:o.message,type:o.type,onClose:()=>{r({message:"",type:"success"})}}),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-7xl w-full",children:[e&&(0,s.jsxs)("div",{className:"space-y-4",style:{minHeight:"calc(100vh - 2rem)"},children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(S,{}),(0,s.jsx)(_,{})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 flex-1",children:[(0,s.jsx)(E,{}),(0,s.jsx)(j,{})]})]}),t&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",style:{height:"calc(100vh - 2rem)"},children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(S,{}),(0,s.jsx)(_,{})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(E,{}),(0,s.jsx)(j,{})]})]}),a&&(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-8",style:{height:"calc(100vh - 2rem)"},children:[(0,s.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,s.jsx)(S,{}),(0,s.jsx)(_,{})]}),(0,s.jsx)(E,{}),(0,s.jsx)(j,{})]})]})})]})};function D(){return(0,s.jsx)(h,{children:(0,s.jsx)(T,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,742,441,684,358],()=>t(804)),_N_E=e.O()}]);